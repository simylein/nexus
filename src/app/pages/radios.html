<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="View all of your radios" />
		<title>Nexus radios</title>
		<style></style>
	</head>
	<body
		class="font-sans min-h-dvh flex flex-col m-0 text-base leading-none text-black dark:text-white background-white dark:background-black"
		onload="loadRadios()"
	>
		<notifications ref="./src/app/components/notifications.html" />
		<header class="sticky top-0 w-full background-neutral-100 dark:background-neutral-900 z-4">
			<nav
				class="flex flex-row gap-2 sm:gap-3 lg:gap-4 pt-2 sm:pt-3 lg:pt-4 pr-4 sm:pr-6 lg:pr-8 pb-2 sm:pb-3 lg:pb-4 pl-4 sm:pl-6 lg:pl-8 text-lg font-normal overflow-x-auto scrollbar-none"
			>
				<a href="/" class="no-underline text-black dark:text-white">Home</a>
				<a href="/radios" class="no-underline text-blue-600 dark:text-blue-400">Radios</a>
				<a href="/devices" class="no-underline text-black dark:text-white">Devices</a>
				<a href="/hosts" class="no-underline text-black dark:text-white">Hosts</a>
			</nav>
		</header>
		<main class="flex flex-col grow m-4 sm:m-6 lg:m-8">
			<div class="flex items-center justify-between">
				<div></div>
				<icon-create ref="./src/app/components/icon-create.html" id="create" class="w-5 lg:w-6 h-5 lg:h-6 opacity-50 cursor-not-allowed" />
			</div>
			<div class="overflow-x-auto scrollbar-none">
				<table class="w-full text-nowrap border-collapse">
					<thead>
						<tr
							class="text-neutral-600 dark:text-neutral-400 border-solid border-t-0 border-r-0 border-b-1 border-l-0 border-b-neutral-400 dark:border-b-neutral-600"
						>
							<th
								id="id"
								sort="asc"
								class="pt-2 sm:pt-3 lg:pt-4 pr-2 sm:pr-3 lg:pr-4 pb-2 sm:pb-3 lg:pb-4 text-start text-base font-normal cursor-pointer"
								onclick="paintSorting('id'); loadRadios()"
							>
								Id
								<icon-chevron-up ref="./src/app/components/icon-chevron-up.html" class="h-3 w-3" />
								<icon-chevron-down ref="./src/app/components/icon-chevron-down.html" class="hidden h-3 w-3" />
							</th>
							<th
								id="device"
								class="pt-2 sm:pt-3 lg:pt-4 pr-2 sm:pr-3 lg:pr-4 pb-2 sm:pb-3 lg:pb-4 text-start text-base font-normal cursor-pointer"
								onclick="paintSorting('device'); loadRadios()"
							>
								Device
								<icon-chevron-up ref="./src/app/components/icon-chevron-up.html" class="hidden h-3 w-3" />
								<icon-chevron-down ref="./src/app/components/icon-chevron-down.html" class="hidden h-3 w-3" />
							</th>
							<th
								id="frequency"
								class="pt-2 sm:pt-3 lg:pt-4 pr-2 sm:pr-3 lg:pr-4 pb-2 sm:pb-3 lg:pb-4 text-start text-base font-normal cursor-pointer"
								onclick="paintSorting('frequency'); loadRadios()"
							>
								Frequency
								<icon-chevron-up ref="./src/app/components/icon-chevron-up.html" class="hidden h-3 w-3" />
								<icon-chevron-down ref="./src/app/components/icon-chevron-down.html" class="hidden h-3 w-3" />
							</th>
							<th
								id="bandwidth"
								class="pt-2 sm:pt-3 lg:pt-4 pr-2 sm:pr-3 lg:pr-4 pb-2 sm:pb-3 lg:pb-4 text-start text-base font-normal cursor-pointer"
								onclick="paintSorting('bandwidth'); loadRadios()"
							>
								Bandwidth
								<icon-chevron-up ref="./src/app/components/icon-chevron-up.html" class="hidden h-3 w-3" />
								<icon-chevron-down ref="./src/app/components/icon-chevron-down.html" class="hidden h-3 w-3" />
							</th>
							<th
								id="spreading-factor"
								class="pt-2 sm:pt-3 lg:pt-4 pr-2 sm:pr-3 lg:pr-4 pb-2 sm:pb-3 lg:pb-4 text-start text-base font-normal cursor-pointer"
								onclick="paintSorting('spreadingFactor'); loadRadios()"
							>
								Spreading Factor
								<icon-chevron-up ref="./src/app/components/icon-chevron-up.html" class="hidden h-3 w-3" />
								<icon-chevron-down ref="./src/app/components/icon-chevron-down.html" class="hidden h-3 w-3" />
							</th>
							<th
								id="coding-rate"
								class="pt-2 sm:pt-3 lg:pt-4 pr-2 sm:pr-3 lg:pr-4 pb-2 sm:pb-3 lg:pb-4 text-start text-base font-normal cursor-pointer"
								onclick="paintSorting('codingRate'); loadRadios()"
							>
								Coding rate
								<icon-chevron-up ref="./src/app/components/icon-chevron-up.html" class="hidden h-3 w-3" />
								<icon-chevron-down ref="./src/app/components/icon-chevron-down.html" class="hidden h-3 w-3" />
							</th>
							<th
								id="tx-power"
								class="pt-2 sm:pt-3 lg:pt-4 pr-2 sm:pr-3 lg:pr-4 pb-2 sm:pb-3 lg:pb-4 text-start text-base font-normal cursor-pointer"
								onclick="paintSorting('txPower'); loadRadios()"
							>
								Tx power
								<icon-chevron-up ref="./src/app/components/icon-chevron-up.html" class="hidden h-3 w-3" />
								<icon-chevron-down ref="./src/app/components/icon-chevron-down.html" class="hidden h-3 w-3" />
							</th>
							<th
								id="preamble-len"
								class="pt-2 sm:pt-3 lg:pt-4 pr-2 sm:pr-3 lg:pr-4 pb-2 sm:pb-3 lg:pb-4 text-start text-base font-normal cursor-pointer"
								onclick="paintSorting('preambleLen'); loadRadios()"
							>
								Preamble len
								<icon-chevron-up ref="./src/app/components/icon-chevron-up.html" class="hidden h-3 w-3" />
								<icon-chevron-down ref="./src/app/components/icon-chevron-down.html" class="hidden h-3 w-3" />
							</th>
							<th
								id="sync-word"
								class="pt-2 sm:pt-3 lg:pt-4 pr-2 sm:pr-3 lg:pr-4 pb-2 sm:pb-3 lg:pb-4 text-start text-base font-normal cursor-pointer"
								onclick="paintSorting('syncWord'); loadRadios()"
							>
								Sync word
								<icon-chevron-up ref="./src/app/components/icon-chevron-up.html" class="hidden h-3 w-3" />
								<icon-chevron-down ref="./src/app/components/icon-chevron-down.html" class="hidden h-3 w-3" />
							</th>
							<th
								id="checksum"
								class="pt-2 sm:pt-3 lg:pt-4 pr-2 sm:pr-3 lg:pr-4 pb-2 sm:pb-3 lg:pb-4 text-start text-base font-normal cursor-pointer"
								onclick="paintSorting('checksum'); loadRadios()"
							>
								Checksum
								<icon-chevron-up ref="./src/app/components/icon-chevron-up.html" class="hidden h-3 w-3" />
								<icon-chevron-down ref="./src/app/components/icon-chevron-down.html" class="hidden h-3 w-3" />
							</th>
							<th class="pt-2 sm:pt-3 lg:pt-4 pr-2 sm:pr-3 lg:pr-4 pb-2 sm:pb-3 lg:pb-4 text-start text-base font-normal">Actions</th>
						</tr>
					</thead>
					<tbody id="radios">
						<radio-row ref="./src/app/components/radio-row.html" />
						<radio-row ref="./src/app/components/radio-row.html" />
						<radio-row ref="./src/app/components/radio-row.html" />
						<radio-row ref="./src/app/components/radio-row.html" />
						<radio-row ref="./src/app/components/radio-row.html" />
						<radio-row ref="./src/app/components/radio-row.html" />
						<radio-row ref="./src/app/components/radio-row.html" />
						<radio-row ref="./src/app/components/radio-row.html" />
						<radio-row ref="./src/app/components/radio-row.html" />
						<radio-row ref="./src/app/components/radio-row.html" />
						<radio-row ref="./src/app/components/radio-row.html" />
						<radio-row ref="./src/app/components/radio-row.html" />
						<radio-row ref="./src/app/components/radio-row.html" />
						<radio-row ref="./src/app/components/radio-row.html" />
						<radio-row ref="./src/app/components/radio-row.html" />
						<radio-row ref="./src/app/components/radio-row.html" />
					</tbody>
				</table>
			</div>
			<dialog id="create-dialog" class="w-full max-w-96 p-0 border-0 text-black dark:text-white background-neutral-100 dark:background-neutral-900">
				<form class="m-4 flex flex-col gap-4" onsubmit="createForm.handleSubmit(event)">
					<h1 class="m-0 text-xl font-medium">Create radio?</h1>
					<div class="w-full flex flex-col items-start">
						<label for="create-device" class="mb-2 text-base font-normal">Device</label>
						<input
							id="create-device"
							type="text"
							class="box-border w-full h-9 p-2 text-base border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800"
							placeholder="device"
							autofocus
							onchange="createForm.setValue('device', event.target.value)"
							onblur="createForm.setTouched('device', true)"
						/>
						<p id="create-device-validation" class="m-0 mt-2 hidden text-red-600 dark:text-red-400"></p>
					</div>
					<div class="w-full flex flex-col items-start">
						<label for="create-frequency" class="mb-2 text-base font-normal">Frequency</label>
						<input
							id="create-frequency"
							type="text"
							class="box-border w-full h-9 p-2 text-base border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800"
							placeholder="frequency"
							onchange="createForm.setValue('frequency', event.target.value)"
							onblur="createForm.setTouched('frequency', true)"
						/>
						<p id="create-frequency-validation" class="m-0 mt-2 hidden text-red-600 dark:text-red-400"></p>
					</div>
					<div class="w-full flex flex-col items-start">
						<label for="create-bandwidth" class="mb-2 text-base font-normal">Bandwidth</label>
						<input
							id="create-bandwidth"
							type="text"
							class="box-border w-full h-9 p-2 text-base border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800"
							placeholder="bandwidth"
							onchange="createForm.setValue('bandwidth', event.target.value)"
							onblur="createForm.setTouched('bandwidth', true)"
						/>
						<p id="create-bandwidth-validation" class="m-0 mt-2 hidden text-red-600 dark:text-red-400"></p>
					</div>
					<div class="w-full flex flex-col items-start">
						<label for="create-spreading-factors" class="mb-2 text-base font-normal">Spreading factor</label>
						<div id="create-spreading-factors" class="w-full flex flex-row gap-2 overflow-x-auto scrollbar-none">
							<button
								type="button"
								class="h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800 outline-none cursor-pointer"
								onclick="highlightSpreadingFactor(document.getElementById('create-spreading-factors'), 7); createForm.setValue('spreadingFactor', 7); createForm.setTouched('spreadingFactor', true)"
							>
								7
							</button>
							<button
								type="button"
								class="h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800 outline-none cursor-pointer"
								onclick="highlightSpreadingFactor(document.getElementById('create-spreading-factors'), 8); createForm.setValue('spreadingFactor', 8); createForm.setTouched('spreadingFactor', true)"
							>
								8
							</button>
							<button
								type="button"
								class="h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800 outline-none cursor-pointer"
								onclick="highlightSpreadingFactor(document.getElementById('create-spreading-factors'), 9); createForm.setValue('spreadingFactor', 9); createForm.setTouched('spreadingFactor', true)"
							>
								9
							</button>
							<button
								type="button"
								class="h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800 outline-none cursor-pointer"
								onclick="highlightSpreadingFactor(document.getElementById('create-spreading-factors'), 10); createForm.setValue('spreadingFactor', 10); createForm.setTouched('spreadingFactor', true)"
							>
								10
							</button>
							<button
								type="button"
								class="h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800 outline-none cursor-pointer"
								onclick="highlightSpreadingFactor(document.getElementById('create-spreading-factors'), 11); createForm.setValue('spreadingFactor', 11); createForm.setTouched('spreadingFactor', true)"
							>
								11
							</button>
							<button
								type="button"
								class="h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800 outline-none cursor-pointer"
								onclick="highlightSpreadingFactor(document.getElementById('create-spreading-factors'), 12); createForm.setValue('spreadingFactor', 12); createForm.setTouched('spreadingFactor', true)"
							>
								12
							</button>
						</div>
						<p id="create-spreading-factor-validation" class="m-0 mt-2 hidden text-red-600 dark:text-red-400"></p>
					</div>
					<div class="w-full flex flex-col items-start">
						<label for="create-coding-rates" class="mb-2 text-base font-normal">Coding rate</label>
						<div id="create-coding-rates" class="w-full flex flex-row gap-2 overflow-x-auto scrollbar-none">
							<button
								type="button"
								class="h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800 outline-none cursor-pointer"
								onclick="highlightCodingRate(document.getElementById('create-coding-rates'), 5); createForm.setValue('codingRate', 5); createForm.setTouched('codingRate', true)"
							>
								4/5
							</button>
							<button
								type="button"
								class="h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800 outline-none cursor-pointer"
								onclick="highlightCodingRate(document.getElementById('create-coding-rates'), 6); createForm.setValue('codingRate', 6); createForm.setTouched('codingRate', true)"
							>
								4/6
							</button>
							<button
								type="button"
								class="h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800 outline-none cursor-pointer"
								onclick="highlightCodingRate(document.getElementById('create-coding-rates'), 7); createForm.setValue('codingRate', 7); createForm.setTouched('codingRate', true)"
							>
								4/7
							</button>
							<button
								type="button"
								class="h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800 outline-none cursor-pointer"
								onclick="highlightCodingRate(document.getElementById('create-coding-rates'), 8); createForm.setValue('codingRate', 8); createForm.setTouched('codingRate', true)"
							>
								4/8
							</button>
						</div>
						<p id="create-coding-rate-validation" class="m-0 mt-2 hidden text-red-600 dark:text-red-400"></p>
					</div>
					<div class="w-full flex flex-col items-start">
						<label for="create-tx-power" class="mb-2 text-base font-normal">Tx power</label>
						<input
							id="create-tx-power"
							type="text"
							class="box-border w-full h-9 p-2 text-base border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800"
							placeholder="tx power"
							autofocus
							onchange="createForm.setValue('txPower', event.target.value)"
							onblur="createForm.setTouched('txPower', true)"
						/>
						<p id="create-tx-power-validation" class="m-0 mt-2 hidden text-red-600 dark:text-red-400"></p>
					</div>
					<div class="w-full flex flex-col items-start">
						<label for="create-preamble-len" class="mb-2 text-base font-normal">Preamble len</label>
						<input
							id="create-preamble-len"
							type="text"
							class="box-border w-full h-9 p-2 text-base border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800"
							placeholder="preamble len"
							autofocus
							onchange="createForm.setValue('preambleLen', event.target.value)"
							onblur="createForm.setTouched('preambleLen', true)"
						/>
						<p id="create-preamble-len-validation" class="m-0 mt-2 hidden text-red-600 dark:text-red-400"></p>
					</div>
					<div class="w-full flex flex-col items-start">
						<label for="create-sync-word" class="mb-2 text-base font-normal">Sync word</label>
						<input
							id="create-sync-word"
							type="text"
							class="box-border w-full h-9 p-2 text-base border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800"
							placeholder="sync word"
							onchange="createForm.setValue('syncWord', event.target.value)"
							onblur="createForm.setTouched('syncWord', true)"
						/>
						<p id="create-sync-word-validation" class="m-0 mt-2 hidden text-red-600 dark:text-red-400"></p>
					</div>
					<div class="flex flex-row-reverse justify-start gap-2">
						<button
							id="create-button"
							type="submit"
							class="min-w-28 h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-green-300 dark:background-green-700 outline-none cursor-pointer"
						>
							Create
						</button>
						<button
							class="min-w-28 h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-300 dark:background-neutral-700 outline-none cursor-pointer"
							type="button"
							onclick="closeCreateDialog()"
						>
							Cancel
						</button>
					</div>
				</form>
			</dialog>
			<dialog id="update-dialog" class="w-full max-w-96 p-0 border-0 text-black dark:text-white background-neutral-100 dark:background-neutral-900">
				<form class="m-4 flex flex-col gap-4" onsubmit="updateForm.handleSubmit(event)">
					<h1 class="m-0 text-xl font-medium">Update radio?</h1>
					<div class="w-full flex flex-col items-start">
						<label for="update-device" class="mb-2 text-base font-normal">Device</label>
						<input
							id="update-device"
							type="text"
							class="box-border w-full h-9 p-2 text-base border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800"
							placeholder="device"
							autofocus
							onchange="updateForm.setValue('device', event.target.value)"
							onblur="updateForm.setTouched('device', true)"
						/>
						<p id="update-device-validation" class="m-0 mt-2 hidden text-red-600 dark:text-red-400"></p>
					</div>
					<div class="w-full flex flex-col items-start">
						<label for="update-frequency" class="mb-2 text-base font-normal">Frequency</label>
						<input
							id="update-frequency"
							type="text"
							class="box-border w-full h-9 p-2 text-base border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800"
							placeholder="frequency"
							onchange="updateForm.setValue('frequency', event.target.value)"
							onblur="updateForm.setTouched('frequency', true)"
						/>
						<p id="update-frequency-validation" class="m-0 mt-2 hidden text-red-600 dark:text-red-400"></p>
					</div>
					<div class="w-full flex flex-col items-start">
						<label for="update-bandwidth" class="mb-2 text-base font-normal">Bandwidth</label>
						<input
							id="update-bandwidth"
							type="text"
							class="box-border w-full h-9 p-2 text-base border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800"
							placeholder="bandwidth"
							onchange="updateForm.setValue('bandwidth', event.target.value)"
							onblur="updateForm.setTouched('bandwidth', true)"
						/>
						<p id="update-bandwidth-validation" class="m-0 mt-2 hidden text-red-600 dark:text-red-400"></p>
					</div>
					<div class="w-full flex flex-col items-start">
						<label for="update-spreading-factors" class="mb-2 text-base font-normal">Spreading factor</label>
						<div id="update-spreading-factors" class="w-full flex flex-row gap-2 overflow-x-auto scrollbar-none">
							<button
								type="button"
								class="h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800 outline-none cursor-pointer"
								onclick="highlightSpreadingFactor(document.getElementById('update-spreading-factors'), 7); updateForm.setValue('spreadingFactor', 7); updateForm.setTouched('spreadingFactor', true)"
							>
								7
							</button>
							<button
								type="button"
								class="h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800 outline-none cursor-pointer"
								onclick="highlightSpreadingFactor(document.getElementById('update-spreading-factors'), 8); updateForm.setValue('spreadingFactor', 8); updateForm.setTouched('spreadingFactor', true)"
							>
								8
							</button>
							<button
								type="button"
								class="h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800 outline-none cursor-pointer"
								onclick="highlightSpreadingFactor(document.getElementById('update-spreading-factors'), 9); updateForm.setValue('spreadingFactor', 9); updateForm.setTouched('spreadingFactor', true)"
							>
								9
							</button>
							<button
								type="button"
								class="h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800 outline-none cursor-pointer"
								onclick="highlightSpreadingFactor(document.getElementById('update-spreading-factors'), 10); updateForm.setValue('spreadingFactor', 10); updateForm.setTouched('spreadingFactor', true)"
							>
								10
							</button>
							<button
								type="button"
								class="h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800 outline-none cursor-pointer"
								onclick="highlightSpreadingFactor(document.getElementById('update-spreading-factors'), 11); updateForm.setValue('spreadingFactor', 11); updateForm.setTouched('spreadingFactor', true)"
							>
								11
							</button>
							<button
								type="button"
								class="h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800 outline-none cursor-pointer"
								onclick="highlightSpreadingFactor(document.getElementById('update-spreading-factors'), 12); updateForm.setValue('spreadingFactor', 12); updateForm.setTouched('spreadingFactor', true)"
							>
								12
							</button>
						</div>
						<p id="update-spreading-factor-validation" class="m-0 mt-2 hidden text-red-600 dark:text-red-400"></p>
					</div>
					<div class="w-full flex flex-col items-start">
						<label for="update-coding-rates" class="mb-2 text-base font-normal">Coding rate</label>
						<div id="update-coding-rates" class="w-full flex flex-row gap-2 overflow-x-auto scrollbar-none">
							<button
								type="button"
								class="h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800 outline-none cursor-pointer"
								onclick="highlightCodingRate(document.getElementById('update-coding-rates'), 5); updateForm.setValue('codingRate', 5); updateForm.setTouched('codingRate', true)"
							>
								4/5
							</button>
							<button
								type="button"
								class="h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800 outline-none cursor-pointer"
								onclick="highlightCodingRate(document.getElementById('update-coding-rates'), 6); updateForm.setValue('codingRate', 6); updateForm.setTouched('codingRate', true)"
							>
								4/6
							</button>
							<button
								type="button"
								class="h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800 outline-none cursor-pointer"
								onclick="highlightCodingRate(document.getElementById('update-coding-rates'), 7); updateForm.setValue('codingRate', 7); updateForm.setTouched('codingRate', true)"
							>
								4/7
							</button>
							<button
								type="button"
								class="h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800 outline-none cursor-pointer"
								onclick="highlightCodingRate(document.getElementById('update-coding-rates'), 8); updateForm.setValue('codingRate', 8); updateForm.setTouched('codingRate', true)"
							>
								4/8
							</button>
						</div>
						<p id="update-coding-rate-validation" class="m-0 mt-2 hidden text-red-600 dark:text-red-400"></p>
					</div>
					<div class="w-full flex flex-col items-start">
						<label for="update-tx-power" class="mb-2 text-base font-normal">Tx power</label>
						<input
							id="update-tx-power"
							type="text"
							class="box-border w-full h-9 p-2 text-base border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800"
							placeholder="tx power"
							autofocus
							onchange="updateForm.setValue('txPower', event.target.value)"
							onblur="updateForm.setTouched('txPower', true)"
						/>
						<p id="update-tx-power-validation" class="m-0 mt-2 hidden text-red-600 dark:text-red-400"></p>
					</div>
					<div class="w-full flex flex-col items-start">
						<label for="update-preamble-len" class="mb-2 text-base font-normal">Preamble len</label>
						<input
							id="update-preamble-len"
							type="text"
							class="box-border w-full h-9 p-2 text-base border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800"
							placeholder="preamble len"
							autofocus
							onchange="updateForm.setValue('preambleLen', event.target.value)"
							onblur="updateForm.setTouched('preambleLen', true)"
						/>
						<p id="update-preamble-len-validation" class="m-0 mt-2 hidden text-red-600 dark:text-red-400"></p>
					</div>
					<div class="w-full flex flex-col items-start">
						<label for="update-sync-word" class="mb-2 text-base font-normal">Sync word</label>
						<input
							id="update-sync-word"
							type="text"
							class="box-border w-full h-9 p-2 text-base border-0 text-black dark:text-white background-neutral-200 dark:background-neutral-800"
							placeholder="sync word"
							onchange="updateForm.setValue('syncWord', event.target.value)"
							onblur="updateForm.setTouched('syncWord', true)"
						/>
						<p id="update-sync-word-validation" class="m-0 mt-2 hidden text-red-600 dark:text-red-400"></p>
					</div>
					<div class="flex flex-row-reverse justify-start gap-2">
						<button
							id="update-button"
							type="submit"
							class="min-w-28 h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-blue-300 dark:background-blue-700 outline-none cursor-pointer"
						>
							Update
						</button>
						<button
							class="min-w-28 h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-300 dark:background-neutral-700 outline-none cursor-pointer"
							type="button"
							onclick="closeUpdateDialog()"
						>
							Cancel
						</button>
					</div>
				</form>
			</dialog>
			<dialog id="delete-dialog" class="w-full max-w-96 p-0 border-0 text-black dark:text-white background-neutral-100 dark:background-neutral-900">
				<form class="m-4 flex flex-col gap-2" onsubmit="deleteForm.handleSubmit(event)">
					<h1 class="m-0 text-xl font-medium">Delete radio?</h1>
					<p class="m-0 text-base font-normal">Deleting this radio will stop any further transmissions and remove said radio from service.</p>
					<div class="flex flex-row-reverse justify-start gap-2">
						<button
							id="delete-button"
							type="submit"
							class="min-w-28 h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-red-300 dark:background-red-700 outline-none cursor-pointer"
						>
							Delete
						</button>
						<button
							class="min-w-28 h-8 text-base font-normal pt-1 pr-4 pb-1 pl-4 border-0 text-black dark:text-white background-neutral-300 dark:background-neutral-700 outline-none cursor-pointer"
							type="button"
							onclick="closeDeleteDialog()"
						>
							Cancel
						</button>
					</div>
				</form>
			</dialog>
		</main>
		<footer class="w-full background-neutral-100 dark:background-neutral-900">
			<div
				class="flex flex-row justify-between gap-2 sm:gap-3 lg:gap-4 pt-2 sm:pt-3 lg:pt-4 pr-4 sm:pr-6 lg:pr-8 pb-2 sm:pb-3 lg:pb-4 pl-4 sm:pl-6 lg:pl-8 text-lg font-normal text-nowrap overflow-x-auto scrollbar-none"
			>
				<p class="m-0 text-xs font-normal text-neutral-400 dark:text-neutral-600">nexus {version} {commit}</p>
				<p class="m-0 text-xs font-normal text-neutral-400 dark:text-neutral-600">written by simylein</p>
			</div>
		</footer>
	</body>
	<script>
		import './src/app/scripts/array.js';
		import './src/app/scripts/resize.js';
		import './src/app/scripts/state.js';
		import './src/app/scripts/fade.js';
		import './src/app/scripts/color-sf.js';
		import './src/app/scripts/color-cr.js';
		import './src/app/scripts/color-tx-power.js';
		import './src/app/scripts/search.js';
		import './src/app/scripts/binary.js';
		import './src/app/scripts/fetcher.js';
		import './src/app/scripts/fetching.js';
		import './src/app/scripts/formik.js';
		import './src/app/scripts/report.js';
		import './src/app/scripts/notification.js';
		const create = document.getElementById('create');
		const radios = { retries: 0, reload: 10, timeout: null, controller: null, data: null, element: document.getElementById('radios') };
		const columns = {
			id: document.getElementById('id'),
			device: document.getElementById('device'),
			frequency: document.getElementById('frequency'),
			bandwidth: document.getElementById('bandwidth'),
			spreadingFactor: document.getElementById('spreading-factor'),
			codingRate: document.getElementById('coding-rate'),
			txPower: document.getElementById('tx-power'),
			preambleLen: document.getElementById('preamble-len'),
			syncWord: document.getElementById('sync-word'),
			checksum: document.getElementById('checksum'),
		};
		const paintSorting = (column) => {
			const element = columns[column];
			const sort = element.getAttribute('sort') === 'asc' ? 'desc' : 'asc';
			Object.keys(columns).forEach((col) => {
				columns[col].removeAttribute('sort');
				columns[col].children[0].classList.add('hidden');
				columns[col].children[1].classList.add('hidden');
			});
			element.setAttribute('sort', sort);
			switch (true) {
				case sort === 'asc':
					element.children[0].classList.remove('hidden');
					break;
				case sort === 'desc':
					element.children[1].classList.remove('hidden');
					break;
			}
			setParam('order', column);
			setParam('sort', sort);
		};
		const loadingRadios = (element) => {
			create.classList.remove('cursor-pointer');
			create.classList.add('opacity-50', 'cursor-not-allowed');
			create.onclick = null;
			array(element.children.length).forEach((ind) => {
				loading(element.children[ind].children[0].children[0], ['w-10', 'h-4'], [], '');
				loading(element.children[ind].children[1].children[0], ['w-32', 'h-4'], [], '');
				loading(element.children[ind].children[2].children[0], ['w-24', 'h-4'], [], '');
				loading(element.children[ind].children[3].children[0], ['w-16', 'h-4'], [], '');
				fade(element.children[ind].children[4].children[0]);
				loading(element.children[ind].children[4].children[0], ['w-5', 'h-4'], [], '');
				fade(element.children[ind].children[5].children[0]);
				loading(element.children[ind].children[5].children[0], ['w-7', 'h-4'], [], '');
				fade(element.children[ind].children[6].children[0]);
				loading(element.children[ind].children[6].children[0], ['w-5', 'h-4'], [], '');
				loading(element.children[ind].children[7].children[0], ['w-5', 'h-4'], [], '');
				loading(element.children[ind].children[8].children[0], ['w-5', 'h-4'], [], '');
				loading(element.children[ind].children[9].children[0], ['w-8', 'h-4'], [], '');
				element.children[ind].children[10].children[0].children[0].classList.remove('cursor-pointer');
				element.children[ind].children[10].children[0].children[0].classList.add('opacity-50', 'cursor-not-allowed');
				element.children[ind].children[10].children[0].children[0].onclick = null;
				element.children[ind].children[10].children[0].children[1].classList.remove('cursor-pointer');
				element.children[ind].children[10].children[0].children[1].classList.add('opacity-50', 'cursor-not-allowed');
				element.children[ind].children[10].children[0].children[1].onclick = null;
			});
		};
		const paintRadios = (element, data) => {
			create.classList.remove('opacity-50', 'cursor-not-allowed');
			create.classList.add('cursor-pointer');
			create.onclick = () => openCreateDialog();
			resize(element, data.length > 0 ? data.length : 1);
			array(element.children.length).forEach((ind) => {
				if (data[ind]) {
					paint(element.children[ind].children[0].children[0], [], ['w-10', 'h-4'], data[ind].id.substring(0, 4));
					paint(element.children[ind].children[1].children[0], [], ['w-32', 'h-4'], data[ind].device);
					paint(element.children[ind].children[2].children[0], [], ['w-24', 'h-4'], data[ind].frequency);
					paint(element.children[ind].children[3].children[0], [], ['w-16', 'h-4'], data[ind].bandwidth);
					paint(element.children[ind].children[4].children[0], [], ['w-5', 'h-4'], data[ind].spreadingFactor);
					fade(element.children[ind].children[4].children[0]);
					colorSf(element.children[ind].children[4].children[0], data[ind].spreadingFactor);
					paint(element.children[ind].children[5].children[0], [], ['w-7', 'h-4'], `4/${data[ind].codingRate}`);
					fade(element.children[ind].children[5].children[0]);
					colorCr(element.children[ind].children[5].children[0], data[ind].codingRate);
					paint(element.children[ind].children[6].children[0], [], ['w-5', 'h-4'], data[ind].txPower);
					fade(element.children[ind].children[6].children[0]);
					colorTxPower(element.children[ind].children[6].children[0], data[ind].txPower);
					paint(element.children[ind].children[7].children[0], [], ['w-5', 'h-4'], data[ind].preambleLen);
					paint(element.children[ind].children[8].children[0], [], ['w-5', 'h-4'], data[ind].syncWord);
					paint(element.children[ind].children[9].children[0], [], ['w-8', 'h-4'], data[ind].checksum);
					element.children[ind].children[10].children[0].children[0].classList.remove('opacity-50', 'cursor-not-allowed');
					element.children[ind].children[10].children[0].children[0].classList.add('cursor-pointer');
					element.children[ind].children[10].children[0].children[0].onclick = () => openUpdateDialog(data[ind]);
					element.children[ind].children[10].children[0].children[1].classList.remove('opacity-50', 'cursor-not-allowed');
					element.children[ind].children[10].children[0].children[1].classList.add('cursor-pointer');
					element.children[ind].children[10].children[0].children[1].onclick = () => openDeleteDialog(data[ind]);
				}
			});
		};
		const errorRadios = (element) => {
			create.classList.remove('cursor-pointer');
			create.classList.add('opacity-50', 'cursor-not-allowed');
			create.onclick = null;
			array(element.children.length).forEach((ind) => {
				error(element.children[ind].children[0].children[0], ['w-10', 'h-4'], [], '');
				error(element.children[ind].children[1].children[0], ['w-32', 'h-4'], [], '');
				error(element.children[ind].children[2].children[0], ['w-24', 'h-4'], [], '');
				error(element.children[ind].children[3].children[0], ['w-16', 'h-4'], [], '');
				fade(element.children[ind].children[4].children[0]);
				error(element.children[ind].children[4].children[0], ['w-5', 'h-4'], [], '');
				fade(element.children[ind].children[5].children[0]);
				error(element.children[ind].children[5].children[0], ['w-7', 'h-4'], [], '');
				fade(element.children[ind].children[6].children[0]);
				error(element.children[ind].children[6].children[0], ['w-5', 'h-4'], [], '');
				error(element.children[ind].children[7].children[0], ['w-5', 'h-4'], [], '');
				error(element.children[ind].children[8].children[0], ['w-5', 'h-4'], [], '');
				error(element.children[ind].children[9].children[0], ['w-8', 'h-4'], [], '');
				element.children[ind].children[10].children[0].children[0].classList.remove('cursor-pointer');
				element.children[ind].children[10].children[0].children[0].classList.add('opacity-50', 'cursor-not-allowed');
				element.children[ind].children[10].children[0].children[0].onclick = null;
				element.children[ind].children[10].children[0].children[1].classList.remove('cursor-pointer');
				element.children[ind].children[10].children[0].children[1].classList.add('opacity-50', 'cursor-not-allowed');
				element.children[ind].children[10].children[0].children[1].onclick = null;
			});
		};
		const parseRadios = async (response) => {
			const buffer = await response.arrayBuffer();
			const binary = new Binary(buffer);
			const radios = [];
			while (binary.offset < buffer.byteLength) {
				const radio = {
					id: null,
					device: null,
					frequency: null,
					bandwidth: null,
					spreadingFactor: null,
					codingRate: null,
					txPower: null,
					preambleLen: null,
					syncWord: null,
					checksum: null,
				};
				radio.id = binary.uuid();
				radio.device = binary.string();
				radio.frequency = binary.uint(32);
				radio.bandwidth = binary.uint(32);
				radio.spreadingFactor = binary.uint(8);
				radio.codingRate = binary.uint(8);
				radio.txPower = binary.uint(8);
				radio.preambleLen = binary.uint(8);
				radio.syncWord = binary.hex(1);
				radio.checksum = binary.bool();
				radios.push(radio);
			}
			return radios;
		};
		const loadRadios = fetching(
			radios,
			(context) => window.requestAnimationFrame(() => loadingRadios(context.element)),
			(context) => {
				const endpoint = `/api/radios?order=${getParam('order', 'id')}&sort=${getParam('sort', 'asc')}`;
				return fetcher('get', endpoint, null, { controller: context.controller });
			},
			async (context, response) => (context.data = await parseRadios(response)),
			(context) => window.requestAnimationFrame(() => paintRadios(context.element, context.data)),
			(context) => window.requestAnimationFrame(() => errorRadios(context.element))
		);
		const highlightSpreadingFactor = (element, spreadingFactor) => {
			array(element.children.length).forEach((ind) => {
				fade(element.children[ind]);
				element.children[ind].classList.add('text-black', 'dark:text-white', 'background-neutral-200', 'dark:background-neutral-800');
			});
			switch (spreadingFactor) {
				case 7:
					fade(element.children[0]);
					element.children[0].classList.add('text-green-600', 'dark:text-green-400', 'background-green-100', 'dark:background-green-900');
					break;
				case 8:
					fade(element.children[1]);
					element.children[1].classList.add('text-lime-600', 'dark:text-lime-400', 'background-lime-100', 'dark:background-lime-900');
					break;
				case 9:
					fade(element.children[2]);
					element.children[2].classList.add('text-yellow-600', 'dark:text-yellow-400', 'background-yellow-100', 'dark:background-yellow-900');
					break;
				case 10:
					fade(element.children[3]);
					element.children[3].classList.add('text-amber-600', 'dark:text-amber-400', 'background-amber-100', 'dark:background-amber-900');
					break;
				case 11:
					fade(element.children[4]);
					element.children[4].classList.add('text-orange-600', 'dark:text-orange-400', 'background-orange-100', 'dark:background-orange-900');
					break;
				case 12:
					fade(element.children[5]);
					element.children[5].classList.add('text-red-600', 'dark:text-red-400', 'background-red-100', 'dark:background-red-900');
					break;
			}
		};
		const highlightCodingRate = (element, codingRate) => {
			array(element.children.length).forEach((ind) => {
				fade(element.children[ind]);
				element.children[ind].classList.add('text-black', 'dark:text-white', 'background-neutral-200', 'dark:background-neutral-800');
			});
			switch (codingRate) {
				case 5:
					fade(element.children[0]);
					element.children[0].classList.add('text-green-600', 'dark:text-green-400', 'background-green-100', 'dark:background-green-900');
					break;
				case 6:
					fade(element.children[1]);
					element.children[1].classList.add('text-yellow-600', 'dark:text-yellow-400', 'background-yellow-100', 'dark:background-yellow-900');
					break;
				case 7:
					fade(element.children[2]);
					element.children[2].classList.add('text-orange-600', 'dark:text-orange-400', 'background-orange-100', 'dark:background-orange-900');
					break;
				case 8:
					fade(element.children[3]);
					element.children[3].classList.add('text-red-600', 'dark:text-red-400', 'background-red-100', 'dark:background-red-900');
					break;
			}
		};
		const createDialog = document.getElementById('create-dialog');
		const updateDialog = document.getElementById('update-dialog');
		const deleteDialog = document.getElementById('delete-dialog');
		let radio = null;
		const openCreateDialog = () => {
			document.getElementById('create-device').value = '';
			document.getElementById('create-frequency').value = '';
			document.getElementById('create-bandwidth').value = '';
			highlightSpreadingFactor(document.getElementById('create-spreading-factors'), null);
			highlightCodingRate(document.getElementById('create-coding-rates'), null);
			document.getElementById('create-tx-power').value = '';
			document.getElementById('create-preamble-len').value = '';
			document.getElementById('create-sync-word').value = '';
			createDialog.showModal();
		};
		const closeCreateDialog = () => {
			createForm.reset();
			createDialog.close();
		};
		const openUpdateDialog = (radio) => {
			updateForm.setValue('id', radio.id);
			updateForm.setValue('device', `${radio.device}`);
			document.getElementById('update-device').value = radio.device;
			updateForm.setValue('frequency', `${radio.frequency}`);
			document.getElementById('update-frequency').value = radio.frequency;
			updateForm.setValue('bandwidth', `${radio.bandwidth}`);
			document.getElementById('update-bandwidth').value = radio.bandwidth;
			updateForm.setValue('spreadingFactor', radio.spreadingFactor);
			highlightSpreadingFactor(document.getElementById('update-spreading-factors'), radio.spreadingFactor);
			updateForm.setValue('codingRate', radio.codingRate);
			highlightCodingRate(document.getElementById('update-coding-rates'), radio.codingRate);
			updateForm.setValue('txPower', `${radio.txPower}`);
			document.getElementById('update-tx-power').value = radio.txPower;
			updateForm.setValue('preambleLen', `${radio.preambleLen}`);
			document.getElementById('update-preamble-len').value = radio.preambleLen;
			updateForm.setValue('syncWord', `${radio.syncWord}`);
			document.getElementById('update-sync-word').value = radio.syncWord;
			updateDialog.showModal();
		};
		const closeUpdateDialog = () => {
			updateForm.reset();
			updateDialog.close();
		};
		const openDeleteDialog = (radio) => {
			deleteForm.setValue('radioId', radio.id);
			deleteForm.setTouched('radioId', true);
			deleteDialog.showModal();
		};
		const closeDeleteDialog = () => {
			deleteForm.reset();
			deleteDialog.close();
		};
		const createForm = formik(
			{
				button: document.getElementById('create-button'),
				device: document.getElementById('create-device-validation'),
				frequency: document.getElementById('create-frequency-validation'),
				bandwidth: document.getElementById('create-bandwidth-validation'),
				spreadingFactor: document.getElementById('create-spreading-factor-validation'),
				codingRate: document.getElementById('create-coding-rate-validation'),
				txPower: document.getElementById('create-tx-power-validation'),
				preambleLen: document.getElementById('create-preamble-len-validation'),
				syncWord: document.getElementById('create-sync-word-validation'),
			},
			{
				device: (value) => {
					if (!value) return 'device is required';
					if (value.length < 8) return 'device must be at least 8 characters';
					if (value.length > 32) return 'device must be at most 32 characters';
					if (!value.match(/^[/a-z0-9.]+$/)) return 'device must be a valid unix path';
				},
				frequency: (value) => {
					if (!value) return 'frequency is required';
					if (!value.match(/^[0-9]+$/)) return 'frequency must be a number';
					if (+value < 430000000) return 'frequency must be min 430000000';
					if (+value > 440000000) return 'frequency must be max 440000000';
				},
				bandwidth: (value) => {
					if (!value) return 'bandwidth is required';
					if (!value.match(/^[0-9]+$/)) return 'bandwidth must be a number';
					if (+value < 7800) return 'bandwidth must be min 7800';
					if (+value > 500000) return 'bandwidth must be max 500000';
				},
				spreadingFactor: (value) => {
					if (!value) return 'spreading factor is required';
					if (value < 7) return 'spreading factor must be min 7';
					if (value > 12) return 'spreading factor must be max 12';
				},
				codingRate: (value) => {
					if (!value) return 'coding rate is required';
					if (value < 5) return 'coding rate must be min 5';
					if (value > 8) return 'coding rate must be max 8';
				},
				txPower: (value) => {
					if (!value) return 'tx power is required';
					if (!value.match(/^[0-9]+$/)) return 'tx power must be a number';
					if (+value < 2) return 'tx power must be min 2';
					if (+value > 17) return 'tx power must be max 17';
				},
				preambleLen: (value) => {
					if (!value) return 'preamble len is required';
					if (!value.match(/^[0-9]+$/)) return 'preamble len must be a number';
					if (+value < 6) return 'preamble len must be min 6';
					if (+value > 21) return 'preamble len must be max 21';
				},
				syncWord: (value) => {
					if (!value) return 'sync word is required';
					if (value.length !== 2) return 'sync word must be 2 characters';
					if (!value.match(/^[0-9a-f]+$/)) return 'sync word must be lowercase hexadecimal';
				},
			},
			async (values) => {
				const bytes = new Uint8Array(13);
				const view = new DataView(bytes.buffer);
				view.setUint32(0, +values.frequency);
				view.setUint32(4, +values.bandwidth);
				view.setUint8(8, values.spreadingFactor);
				view.setUint8(9, values.codingRate);
				view.setUint8(10, values.txPower);
				view.setUint8(11, values.preambleLen);
				view.setUint8(12, parseInt(values.syncWord, 16));
				const data = new Blob([values.device, '\0', view]);
				try {
					await fetcher('post', '/api/radio', data, { headers: { 'content-type': 'application/octet-stream' } });
					notification('success', 'Successfully created radio');
					loadRadios(true);
				} catch (err) {
					report(err);
				}
				closeCreateDialog();
			}
		);
		const updateForm = formik(
			{
				button: document.getElementById('update-button'),
				device: document.getElementById('update-device-validation'),
				frequency: document.getElementById('update-frequency-validation'),
				bandwidth: document.getElementById('update-bandwidth-validation'),
				spreadingFactor: document.getElementById('update-spreading-factor-validation'),
				codingRate: document.getElementById('update-coding-rate-validation'),
				txPower: document.getElementById('update-tx-power-validation'),
				preambleLen: document.getElementById('update-preamble-len-validation'),
				syncWord: document.getElementById('update-sync-word-validation'),
			},
			{
				id: (value) => {
					if (!value) return 'id is required';
					if (value.length !== 32) return 'id must be 32 characters';
					if (!value.match(/^[0-9a-f]+$/)) return 'id must be lowercase hexadecimal';
				},
				device: (value) => {
					if (!value) return 'device is required';
					if (value.length < 8) return 'device must be at least 8 characters';
					if (value.length > 32) return 'device must be at most 32 characters';
					if (!value.match(/^[/a-z0-9.]+$/)) return 'device must be a valid unix path';
				},
				frequency: (value) => {
					if (!value) return 'frequency is required';
					if (!value.match(/^[0-9]+$/)) return 'frequency must be a number';
					if (+value < 430000000) return 'frequency must be min 430000000';
					if (+value > 440000000) return 'frequency must be max 440000000';
				},
				bandwidth: (value) => {
					if (!value) return 'bandwidth is required';
					if (!value.match(/^[0-9]+$/)) return 'bandwidth must be a number';
					if (+value < 7800) return 'bandwidth must be min 7800';
					if (+value > 500000) return 'bandwidth must be max 500000';
				},
				spreadingFactor: (value) => {
					if (!value) return 'spreading factor is required';
					if (value < 7) return 'spreading factor must be min 7';
					if (value > 12) return 'spreading factor must be max 12';
				},
				codingRate: (value) => {
					if (!value) return 'coding rate is required';
					if (value < 5) return 'coding rate must be min 5';
					if (value > 8) return 'coding rate must be max 8';
				},
				txPower: (value) => {
					if (!value) return 'tx power is required';
					if (!value.match(/^[0-9]+$/)) return 'tx power must be a number';
					if (+value < 2) return 'tx power must be min 2';
					if (+value > 17) return 'tx power must be max 17';
				},
				preambleLen: (value) => {
					if (!value) return 'preamble len is required';
					if (!value.match(/^[0-9]+$/)) return 'preamble len must be a number';
					if (+value < 6) return 'preamble len must be min 6';
					if (+value > 21) return 'preamble len must be max 21';
				},
				syncWord: (value) => {
					if (!value) return 'sync word is required';
					if (value.length !== 2) return 'sync word must be 2 characters';
					if (!value.match(/^[0-9a-f]+$/)) return 'sync word must be lowercase hexadecimal';
				},
			},
			async (values) => {
				const bytes = new Uint8Array(13);
				const view = new DataView(bytes.buffer);
				view.setUint32(0, +values.frequency);
				view.setUint32(4, +values.bandwidth);
				view.setUint8(8, values.spreadingFactor);
				view.setUint8(9, values.codingRate);
				view.setUint8(10, values.txPower);
				view.setUint8(11, values.preambleLen);
				view.setUint8(12, parseInt(values.syncWord, 16));
				const data = new Blob([values.device, '\0', view]);
				try {
					await fetcher('patch', `/api/radio/${values.id}`, data, { headers: { 'content-type': 'application/octet-stream' } });
					notification('success', `Successfully updated radio ${values.id.substring(0, 4)}`);
					loadRadios(true);
				} catch (err) {
					report(err);
				}
				closeUpdateDialog();
			}
		);
		const deleteForm = formik(
			{
				button: document.getElementById('delete-button'),
			},
			{
				radioId: (value) => {
					if (!value) return 'radio id is required';
					if (value.length !== 32) return 'radio id must be 32 characters';
					if (!value.match(/^[0-9a-f]+$/)) return 'radio id must be lowercase hexadecimal';
				},
			},
			async (values) => {
				try {
					await fetcher('delete', `/api/radio/${values.radioId}`, null, { headers: { 'content-type': 'application/octet-stream' } });
					notification('success', `Successfully deleted radio ${values.radioId.substring(0, 4)}`);
					loadRadios(true);
				} catch (err) {
					report(err);
				}
				closeDeleteDialog();
			}
		);
	</script>
</html>
